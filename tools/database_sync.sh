#!/bin/bash



# 首先同步数据
echo $(date +%F%r)" 开始同步..."
mysqldump -h 172.16.20.15 -P 52578 -ureader -pDEVOPS123 web_backend project published_version release_version report_project env code_project application --skip-lock-tables 2>/dev/null \
| mysql -h 172.16.30.7 -P 13306 -uroot -pDEVOPS123 web_backend_hsl 2>/dev/null \
&& echo "同步完成啦 success"

# 同步日常数据
/root/workspace/web_backend_v1 sync_daily_data --alsologtostderr=true --serverIp=0.0.0.0 --serverPort=61032 '--dbConnect=root:REVWT1BTMTIz@tcp(172.16.30.7:13306)/web_backend_report?charset=utf8&loc=Asia%2FShanghai' --jenkinsConnect=jenkins:TVRrd1pBcG1ZV0ps@https://jenkins.wezhuiyi.com --influxdbConnect=admin:U1hKV3JzSFlGWFNIYzZ3WA==@http://influxdb.ks1.wezhuiyi.com:80 --nexusConnect=admin:SlR2N25EeHRLU2dDdnZ4ZQ==@http://172.16.30.15 --harborConnect=jenkins:TVRrd1pBcG1ZV0ps@https://registry01.wezhuiyi.com --gitlabConnect=QzRKOFNXLUgtbXMyZFYtaDlKNVU=@https://code.in.wezhuiyi.com/api/v4 --ldapConnect=devopsuser@wezhuiyi.com:YTI3NjQ0NQ==@172.16.20.247:389 --apiDocsPath=/var/web_backend/docs/api_reference --rolePolicyFile=/var/web_backend/auth/keymatch_policy.csv --emailConnect=jenkins:dUZjRTZlaGNLVDNHWjl3dQ==@smtp.exmail.qq.com --emailSuffix=wezhuiyi.com --vmConnect=wenqi@vsphere.local:d0VOOFEyaUAyMDE5LStPcw==@https://172.16.253.253 '--hostDBConnect=oper_plat:UGxzaSQyb0VAMTItdA==@tcp(10.4.2.210:3306)/low_load?charset=utf8&loc=Asia%2FShanghai' --credentialID=8a53e87e-1b05-4f94-81ed-6f80f25f3a28 --webURL=http://devops.ks1.wezhuiyi.com --tapdConnect=z5kxQO6l:MDg3MTM2NzAtMkVENC03RUIwLUJGRkItOEFFM0M5QkZDMzJG@https://api.tapd.cn --weChatConnect=ww3a8dea9a55a5e51f:NDB3ckJtNUZEdkV0cGM3U0x2X2JfTllLVlRwVVVzVXlSWVhuQlh3WWVGSQ==@https://qyapi.weixin.qq.com/cgi-bin --staffSecret=S3VNcjBwMlJLR0NfUEdlOHBxc1BTZTZZaUdrTXlsV21udWVJTzliNFc2VQ== --sonarConnect=admin:aXBjN0Z5Ymp0SWp6TnZGUQ==@http://172.16.20.127:9000 --compileDBName=devops_metrics_v1 --debug=false --log_dir=/tmp/logs

# 同步研发数据
/root/workspace/web_backend_v1 cache_dev_data --alsologtostderr=true --serverIp=0.0.0.0 --serverPort=61032 '--dbConnect=root:REVWT1BTMTIz@tcp(172.16.30.7:13306)/web_backend_report?charset=utf8&loc=Asia%2FShanghai' --jenkinsConnect=jenkins:TVRrd1pBcG1ZV0ps@https://jenkins.wezhuiyi.com --influxdbConnect=admin:U1hKV3JzSFlGWFNIYzZ3WA==@http://influxdb.ks1.wezhuiyi.com:80 --nexusConnect=admin:SlR2N25EeHRLU2dDdnZ4ZQ==@http://172.16.30.15 --harborConnect=jenkins:TVRrd1pBcG1ZV0ps@https://registry01.wezhuiyi.com --gitlabConnect=QzRKOFNXLUgtbXMyZFYtaDlKNVU=@https://code.in.wezhuiyi.com/api/v4 --ldapConnect=devopsuser@wezhuiyi.com:YTI3NjQ0NQ==@172.16.20.247:389 --apiDocsPath=/var/web_backend/docs/api_reference --rolePolicyFile=/var/web_backend/auth/keymatch_policy.csv --emailConnect=jenkins:dUZjRTZlaGNLVDNHWjl3dQ==@smtp.exmail.qq.com --emailSuffix=wezhuiyi.com --vmConnect=wenqi@vsphere.local:d0VOOFEyaUAyMDE5LStPcw==@https://172.16.253.253 '--hostDBConnect=oper_plat:UGxzaSQyb0VAMTItdA==@tcp(10.4.2.210:3306)/low_load?charset=utf8&loc=Asia%2FShanghai' --credentialID=8a53e87e-1b05-4f94-81ed-6f80f25f3a28 --webURL=http://devops.ks1.wezhuiyi.com --tapdConnect=z5kxQO6l:MDg3MTM2NzAtMkVENC03RUIwLUJGRkItOEFFM0M5QkZDMzJG@https://api.tapd.cn --weChatConnect=ww3a8dea9a55a5e51f:NDB3ckJtNUZEdkV0cGM3U0x2X2JfTllLVlRwVVVzVXlSWVhuQlh3WWVGSQ==@https://qyapi.weixin.qq.com/cgi-bin --staffSecret=S3VNcjBwMlJLR0NfUEdlOHBxc1BTZTZZaUdrTXlsV21udWVJTzliNFc2VQ== --sonarConnect=admin:aXBjN0Z5Ymp0SWp6TnZGUQ==@http://172.16.20.127:9000 --compileDBName=devops_metrics_v1 --debug=false --log_dir=/tmp/logs

